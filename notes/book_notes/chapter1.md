# Chapter 1

## What is the Internet?
The Internet is a computer network that interconnects hundreds of millions of computing devices throughout the world. All of these devices are called **hosts** or **end systems**. <br />
End systems are connected together by a network of **communication links** and **packet switches**. There are many types of communication links, which are made up of different types of physical media, including coaxial cable, copper wire, optical fiber and radio spectrum. Different links can transmit data at different rates, with the **transmission rate** of a link measured in bits/second. When one end system has data to send to another end system, the sending end system segments the data and adds header bytes to each segment. The resulting packages of information, known as **packets** in the jargon of computer networks, are then sent through the network to the destination end system, where they are reassembled into the original data. <br />
End systems access the Internet through **Internet Service Providers (ISPs)**, including local cable or telephone companies, corporate ISPs, university ISPs etc. Each ISP is in itself a network of packet switches and communication links. ISPs provide variety of types of network access to the end systems, including residential broadband access such as cable modem or DSL. <br />
The Internet is all about connecting end systems to each other, so the ISPs that provide access to end systems must also be interconnected. These lower-tier ISPs are interconnected through national and international upper-tier ISPs such as Level 3 Communication, AT&T etc. An upper-tier ISP consists of high-speed routers interconnected with high-speed fiber-optic links. Each ISP network is managed independently, runs the IP protocol and conforms to certain naming and address conventions. <br />
End systems, packet switches, and other pieces of the Internet run **protocols** that control the sending and receiving of information within the Internet. The **Transmission Control Protocol (TCP)** and the **Internet Protocol (IP)** are two of the most important protocols in the Internet. <br />
The IP protocol specifies the format of the packets that are sent and received among routers and end systems. The Internet's principal protocols are collectively known as **TCP/IP**. <br />
**Internet standards** are developed by Internet Engineering Task Force (IETF). The IETF standards documents are called **requests for comments (RCFs)**. They define protocols such as TCP, IP, HTTP and SMTP.

### A Services Description
**Distributed application** involve multiple end systems that exchange data with each other. Internet applications run on end systems - they do not run in the packet switches in the network core. <br />
End systems attached to the Internet provide an **Application Programming Interface (API)** that specifies how a program running on one end system asks the Internet infrastructure to deliver data to a specific destination program running on another end system. This Internet API is a set of rules that the sending program must follow so that the Internet can deliver the data to the destination program.

### What Is a Protocol
It takes two (or more) communcating entities running the same protocol in order to accomplish a task. <br />
TCP Connection request ---> <br />
<--- TCP Connection reply <br />
GET http://www.awl.com/kurose-ross ---> <br />
<--- file <br />

#### Network Protocols
All activity in the Internet that involves two or more communicating remote entities (computer, smartphone, tablet, router etc.) is governed by a protocol.
Hardware-implemented protocols in two physically connected computers control the flow of bits on the "wire" between the two network interface cards; congestion-control protocols in end systems control the rate at which packets are transmitted between sender and receiver; protocols in routers determine a packet's path from source to destination. <br />

## The Network Edge
The computers and other devices connected to the Internet are often referred to as end systems because they sit at the edge of the Internet. The Internet's end systems include desktop computers (PCs, Macs, Linux boxes), servers (e.g. Web servers and Email servers) and mobile computers (e.g.g laptops, smartphones and tablets). <br />
End systems are also referred to as *host* because they host (run) application programs such as a Web broeser program, a Web server program, an e-mail client program or an e-mail server program. Hosts are divided into two categories: **clients** and **servers**. Clients tend to be desktop and mobile PCs, smartphones and so on, whereas servers tend to be more powerful machines that store and distribute Web pages, stream video, relay e-mail and so on. <br /> 
Most of the servers from which we receive search results, e-mail, Web pages, and videos reside in large **data centers** (Google has 30-50 data centers, each having more than one hundred thousand servers). <br />

### Access Networks
Access network is the network that physicaly connects an end system to the first router (edge router) on a path from the end system to any other distant end system. <br />
The two most prelavent types of broadband residential access are **digital subscriber line (DSL)** and **cable**. A residence typically obtains DSL Internet access from the same local telephone company (telco) that provides its wired local phone access. Thus, when DSL is used, a customer's telco is also its ISP. Each customer's DSL modem uses the existing telephone line (copper wire) to exchange data with a digital subscriber line access multiplexer (DSLAM) located in the telco's local central office (CO). The home's DSL modem takes digital data and translates it to high-frequency tones for transmission over telephone wires to the CO; the analog signals from many such houses are translated back into digital format at the DSLAM. On the customer side, a splitter separates the data and the telephone signals arriving to the home and forwards the data signal to the DSL modem. On the telco side, in the CO, the DSLAM separates the data and phone signals and sends the data into the Internet.<br />
When the downstream and upstream rates are different, the access is said to be asymmetric.<br />
**Cable Internet access** makes use of the cable television company's existing cable television infrastructure. Fiber optics connect the cable head end to neighborhood-level junctions, from which traditional coaxial cable is then used to reach individual houses and apartments. Cable internet access requires special modems, called cable modems (which is typically an external device and connects to the home PC through an Ethernet port).<br/>
One important characteristic of cable Internet access is that it is a shared broadcast medium. Every packet sent by the head end travels downstream on every link to every home and every packet sent by a home travels on the upstream channel to the head end. For this reason, if several users are simultaneously downloading a video file on the downstream channel, the actual rate at which each user receives its video file will be significantly lower than the aggregate cable downstream rate.<br/>
**Fiber To The Home (FTTH)** can potentially provide Internet access rates in the gigabits per second range.<br />

On corporate and university campuses, and increasingly in home settings, a local area network (LAN) is used to connect an end system to the edge router. Ethernet is by far the most prevalent access technology in corporate, university and home networks. <br />
In a wireless LAN setting, wireless users transmit/receive packets to/from an access point that is connected into the enterprise's network, which in turn is connected to the wired Internet.<br />
Telecommunications companies have made enormous investments in so-called third-generation (3G) wireless, which provides packet-switched wide-area wireless Internet access at speeds in excess of 1 Mbps. Mobile access networks use the radio spectrum.

#### Physical Media
When bit travels from one end system to another, it's transmitted many, many times (the router transmits the bit and sends it and another receives and transmits etc.). For each transmitter-receiver pair, the bit is sent by propagating electromagnetic waves or optical pulses across a **physical medium**. Examples are twisted-pair copper wire, coaxial cable, multimode fiber-optic cable, terrestrial radio spectrum etc. Physical media fall into two categories: **guided media** and **unguided media**. With guided media, the waves are guided along a solid medium, such as a fiber-optic cable or a coaxial cable. With unguided media, the waves propagate in the atmosphere and in outer space, such as in a wireless LAN or a digital satellite channel.<br />

## The Network Core
### Packet Switching
In a network application, end systems exchange **messages** with each other. These messages can contain anything. To send a message from a source end system to a destination end system, the source breaks long messages into smaller chunks of data known as **packets**. Between source and destination, each packet travels through communication links and **packet switches** (**routers** and **link-layer switches**). Packets are transmitted over each communication link at a rate equal to the full transmission rate of the link. So, if a source end system or a packet switch is sending a packet of L bits over a link with transmission rate R bits/sec, then the time to transmit the packet is L/R seconds.<br />
Most packet switches use **store-and-forward transmission** at the input to the links. This means that the packet switch must receive the entire packet before it can begin to transmit the first bit of the packet onto the outbound link. The end-to-end delay is (N links and N-1 routers between source and destination): <br/>
> d_end-to-end = N * (L/R)

Each packet switch has multiple links attached to it. For each attached link, the packet switch has an **output buffer**, which stores packets that the router is about to send into that link. If an arriving packet needs to be transmitted onto a link but finds the link busy with the transmission of another packet, the arricing packet must wait in the output buffer. Thus, in addition to the store-and-forward delays, packets suffer output buffer **queuing delays**. When an arriving packet may find that the buffer is completely full with other packets waigin for transmission, a **packet loss** will occur - either the arricing packet or one of the already-queued will be dropped. <br />
In the Internet, every end system has an address called an IP address. When a source end system wants to send a packet to a destination end system, the source includes the destination's IP address in the packet's header. When a packet arrives at a router in the network, the router examines a portion of the packet's destination address and forwards the packet to an adjacent router. Each router has a **forwarding table** that maps destination addresses to that router's outbound links. When a packet arrives at a router, the router examines the address and searches its forwarding table, using this destination address to find the appropriate outbound link. The router then directs the packet to this outbound link. The Internet has a number of special **routing protocols** that are used to automatically set the forwarding tables.

### Circuit Switching
There are two fundamental approaches to moving data through a network of links and switches: **circuit switching** and **packet switching**. In circuit-switched networks, the resources needed along a path (buffers, link transmission rate) to provide for communication between the end systems are reserved for the duration of the communication session between the end systems. In packet-switched networks, these resources are not reserved, a session's messages use the resources on demand, and as a consequence, may have to wait for access to a communication link. Traditional telephone networks are examples of circuit-switched networks. The connection that is established between sender and receiver is called **circuit**. <br />
When two hosts want to communicate, the network establishes a dedicated **end-to-end connection** between the hosts. Thus in order for Host A to communicate with Host B, the network must first reserve one circuit on each of two links. <br />
A circuit in a link is implemented with either **frequency-division multiplexing (FDM)** or **time-division multiplexing (TDM)**. <br /> With FDM, the frequency spectrum of a link is divided up among the connections established across the link. The link dedicates a frequency band to each connection for the duration of the connection. The width of the band is called **bandwidth**. <br /> 
For a TDM link, time is divided into frames of fixed duration, and each frame is divided into a fixed number of time slots. When the network establishes a connection across a link, the network dedicates one time slot in every frame to this connection.

### Network of Networks
ISPs themselves must be interconnected. This is done by creating a *network of networks* <br />
The overarching goal is to interconnect the access ISPs so that all end systems can send packets to each other. To build a modern network, we must add points of presence (PoPs), multi-homing, peering and Internet exchange points (IXPs) to the hierarchical Network Structure 3. PoPs exist in all levels of the hierarchy, except for the botton level (access ISP). A **PoP** is simply a group of one or more routers (at the same location) in the provider's network where customer ISPs can connect into the provider ISP. <br />
Customer ISP pays a provider ISP to obtain global Internet interconnectivity. The amount that a customer ISP pays a provider ISP reflects the amount of traffic it exchanges with the provider. To reduce these costs, a pair of nearby ISPs at the same level of the hierarchy can **peer**, i.e. they can directly connect their networks together so that all the traffic between them passes over the direct connection rather than through upstream intermediaries. <br />
**Internet Exchange Point (IXP)** is a meeting point where multiple ISPs can peer together.<br/>
In summary, today's Internet (a network of networks) consists of a dozen or so tier-1 ISPs and hundreds of thousands of lower-tier ISPs. The ISPs are diverse in their coverage, with some spanning multiple continents and oceans, and other limited to narrow geographic regions. The lower-tier ISPs connect to the higher-tier ISPs, and the higher-tier ISPs interconnect with one another. Users and content providers are customers of lower-tier ISPs, and lower-tier ISPs are customers of higher-tier ISPs.

## Delay, Loss and Throughput in Packer-Switched Networks
Computer networks necessarily constrain throughput (the amount of data per second that can be transferred) between end systems, introduce delays between end systems, and can actually lose packets.

### Delay in Packet-Switched Networks
A packet starts in a host (source), passes through a series of routers, and ends its journey in another host (destination). As a packet travels from one node (host or router) to the subsequent node (host or router) along this path, the packet suffers from several types of delays at each node along the path. The most important of these deylays are the **nodal processing delay, queuing delay, transmission delay,** and **propagation delay**. Together these delays accumulate to give a **total nodal delay**. <br />
Router A has an outbound link leading to router B. This link is preceded by a queue (buffer). When the packet arrives at A from the upstream node, A examines the packet's header to determine the appropriate outbound link for the packet and then directs the packet to this link. A packet can be transmitted on a link onl if there is no other packet currently being transmitted on the link and if there are no other packets preceding it in the queue; if the link is busy or if there are other packets already queued for the link, the newly arriving packet will then join the queue. <br />
The time required to examine the packet's header and determine where to direct the packet is part of the **processing delay**; it can also include the time needed to check fo bit-level errors in the packet. After this nodal processing, the router directs the packet to the queue that precedes the link to router B. <br />
At the queue, the packet experiences a **queuing delay** as it waits to be transmitted onto the link. The length of the queuing delay of a specific packet will depend on the number of earlier-arriving packets that are queued and waiting for transmission onto the link. If the queue is empty and no other packet is currently being transmitted, then our packet's queuing delay will be zero. <br />
Assuming that packets are transmitted in a first-come-first-served manner, our packet can be transmitted only after all the packets that have arrived before it have been transmitted. Denote the length of the packet by L bits, and denote the transmission rate of the link from router A to router B by R bits/sec. For a 10 Mbps Ethernet link, the rate is R = 10 Mbps. The **transmission delay** is L/R. This is the amount of time required to push all the packet's bits into the link. <br />
Once a bit is pushed into the link, it needs to propagate to router B. The time required to propagate from the beginning of the link to router B is the **propagation delay**. It is the distance between two routers divided by the propagation speed, d/s. <br/>
Transmission delay = packet length <br />
Propagation delay = distance length <br />

### Queuing Delays and Packet Loss
R is the transmission rate and the average rate at which bits arrive at the queue is La bits/sec. The **traffic intensity** is then La/R. If La/R > 1, then the average rate at which bits arrive at the queue exceeds the rate at which the bits can be transmitted from the queue. When La/R <= 1; suppose N packets arrive simultaneously every (L/R)N seconds. Then the first packet transmitted has no queuing delay; the second packet transmitted has a queuing delay of L/R seconds; and more generally the nth packet has (n-1)L/R seconds delay.<br/>
If a packet arrives to a full queue, the packet will be **dropped**.

### End-to-End Delay
Given N-1 routers, processing delay is d_proc, transmission delay is L/R, where L is the packet size, and the propagation on each link is d_prop; then the end-to-end delay is: 
> d_end-end = N(d_proc + d_trans + d_prop)

### Throughput in Computer Networks
In addition to delay and packet loss, another critical performance measure in computerr networks is end-to-end throughput. The **instantaneous throughput** at any instant of time is the rate (int bits/sec) at which Host B is receiving the file. If the file consists of F bits and the transfer takes T seconds for Host B to receive all F bits, then the **average throughput** of the file transfer is F/T bits/sec. <br />
The throughput is min{R_c, R_s}, i.e. it is the transmission rate of the **bottleneck link**. The time it takes to transfer a large file of F bits from server to client is F/min{R_s, R_c}.

## Protocol Layers and Their Service Models
To provide structure to the design of network protocols, network designers organize protocols - and the network hardware and software that implement the procols - in **layers**. Each protocol belongs to one of the layers. A layer offers **services** (**service model** of a layer). The services provided by layer n may include reliable delivery of messages from one edge of the network to the other. <br />
A protocol layer can be implemented in software, in hardware, or in a combination of the two. Application-layer protocols - such as HTTP and SMTP - are almost always implemented in software in the end systems; so are transport-layer protocols. Because the physical layer and data link layers are responsible for handling communication over a specific link, they are typically implemented in a network interface card (Ethernet or WiFi interface cards) associated with a given link. The network layer is often a mixed implementation of hardware and software. <br />
Layering provides a structured way to discuss system components. <br />
The protocols of the various layers are called the **protocol stack**. The Internet protocol stack consists of five layers: the physical, link, network, transport, and application layers. <br />
The **application layer** is where network applications and their application-layer protocol reside. It includes many protocols, such as the HTTP protocol, SMTP, and FTP. An application-layer protocol is distributed over multiple end systems, with the application in one end system using the protocol to exchange packets of information with the application in another end system. We'll refer to this packet of information at the application layer as a **message**. <br />
The Internet's **transport layer** transports application-layer messages between application endpoints. In the Internet there are two transport protocols, TCP and UDP, either of which can transport application-layer messages. TCP provides a connection-oriented service to its applications. This service includes guaranteed delivery of application-layer messages to the destination and flow control (sender/receiver speed matching). TCP also breaks long messages into shorter segments and provides a congestion-control mechanism, so that a source throttles its transmission rate when the network is congested. The UDP protocol provides a connectionless service to its application. It provides no reliability, no flow control, and no congestion control. The transport-layer packet is referred as a **segment**. <br />
The Internet's **network layer** is responsible for moving network-layer packets known as **datagrams** from one host to another. The transport-layer protocol in a source host passes a transport-layer segmend and a destination address to the network layer. The network layer then provides the service of delivering the segment to the transport layer in the destination host. The network layer includes the IP Protocol, which defines the fields in the datagram as well as how the end systems and routers act on these fields. Only one IP protocol and all Internet components that have a network layer must run the IP protocol. The Internet's network layer also contains routing protocols that determine the routes that datagrams take between sources and destinations. Although the network layer contains both the IP protocol and numerous routing protocols, it is often simply referred to as the IP layer. <br />
The network layer routes a datagram through a series of routers between the source and destination. To move a packet from one node to the next in the route, the network layer relies on the services of the **link layer**. When datagram is delivered to the next node, the link layer passes the datagram up to the network layer. The link-layer packets is referred to as **frames**. <br />
While the job of the link layer is to move entire frames from one network element to an adjacent network element, the job of the **physical layer** is to move the *individual bits* within the frame from one node to the next.<br />

## Network Under Attack
Once **malware** infects our device it can do all kinds of devious things, including deleting our files; installing spyware and more. Our compromised host may also be enrolled in a network of thousands of similarly compromised devices, collectively known as a **botnet**, which leverages for spam e-mail distribution or DOS attacks. <br/>
Much of the malware out there today is **self-replicating**: once it infects one host, from that host it seeks entry into yet more hosts. **Viruses** are malware that require some form of user interaction to infect the user's device. **Worms** are malware that can enter a device without any explicit user interaction.<br/>
**Denial-of-Service (DOS) attacks** can be: <br/>
* *Vulnerability attack*. This involves sending a few well-crafted messages to a vulnerable application or operating system running on a targeted host. If the right sequence of packets is sent to a vulnerable application or operating system, the service can stop or, the host can crash.
* *Bandwidth flooding*. The attacker sends a deluge of packets to the targeted host - so many packets that the target's access link becomes clogged, preventing legitimate packets from reaching the server.
* *Connection flooding*. The attacker establishes a large number of half-open or fully open TCP connections at the target host. The host can become so bogged down with these bogus connections that it stops accepting legitimate connections.
<br/>
A passive receiver that records a copy of every packet that flies by is called a **packet sniffer**.<br/>
The ability to inject packets into the Internet with a false source address is known as **IP spoofing**, and is but one of many ways in which one user can masquerade as another user.
